<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HackRPI</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- Page 1 (Form Page) -->
  <div id="page1" class="page active">
    <h2>Enter a zip code:</h2>
    <form id="myForm">
      <label for="zip">ZIP:</label>
      <input type="text" id="zip" name="zip" required><br><br>
      <button type="submit">Submit</button>
    </form>
  </div>

  <!-- Page 2 (Actual Content) -->
  <div id="page2" class="page">
    <h2>Energy Breakdown</h2>

    <canvas id="greenCanvas" width="800" height="500" style="border:1px solid #000000; background-color: green;"></canvas>
    <script>
      const canvas = document.getElementById('greenCanvas');
      const ctx = canvas.getContext('2d');

      let isDragging = false;
      let dragStartX, dragStartY;
      let rectX = 700, rectY = 50, rectWidth = 50, rectHeight = 50;

      canvas.addEventListener('mousedown', (e) => {
        const rect = canvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        if (x > rectX && x < rectX + rectWidth && y > rectY && y < rectY + rectHeight) {
          isDragging = true;
          dragStartX = x - rectX;
          dragStartY = y - rectY;
        }
      });

      canvas.addEventListener('mousemove', (e) => {
        if (isDragging) {
          const rect = canvas.getBoundingClientRect();
          const buffer = 5; // Buffer for the border
          rectX = Math.max(buffer, Math.min(e.clientX - rect.left - dragStartX, canvas.width - rectWidth - buffer));
          rectY = Math.max(buffer, Math.min(e.clientY - rect.top - dragStartY, canvas.height - rectHeight - buffer));
          draw();
        }
      });

      canvas.addEventListener('mouseup', () => {
        isDragging = false;
      });

      canvas.addEventListener('mouseout', () => {
        isDragging = false;
      });

      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = 'blue';
        ctx.fillRect(rectX, rectY, rectWidth, rectHeight);
      }

      draw();
    </script>

    <h3>Current Percentages:</h3>
    <div class="bar-graph" id="currentBarGraph">
        <!-- Bars will be added dynamically here -->
    </div>

    <h3>What Could Be Achieved:</h3>
    <div class="bar-graph" id="proposedBarGraph">
        <!-- Bars will be added dynamically here -->
    </div>

    <p>Looking at zipcode: <span id="zipCode"></span></p>
    <button onclick="goBack()">Go Back</button>
  </div>

  <script src="pages.js"></script>
  <script src="bar.js"></script>
  <script src="excel.js"></script>
</body>
</html>
